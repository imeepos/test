# @sker/studio - AI协作画布应用

从无到有的思维创造平台 - 通过AI协作实现无限画布上的智能思维扩展

## 📋 项目状态 (2025-09-29)

### ✅ 核心架构已完成 (90%)
- **完整项目架构**: 按设计文档实现完整目录结构和组件体系
- **React Flow画布引擎**: 集成完成，支持无限滚动和节点操作
- **AI服务层**: 完整AIService类，支持内容生成、优化、融合功能
- **WebSocket通信**: 实时通信服务，断线重连和消息队列机制
- **状态管理体系**: Zustand stores完整架构 (canvas/node/ai/ui)
- **TypeScript类型系统**: 完整类型定义，确保代码质量
- **构建部署流程**: 项目可正常构建，生产环境ready

### 🔄 核心交互开发中 (65%)  
- **双击创建逻辑**: 空白画布双击创建AI节点的具体实现
- **拖拽扩展机制**: 连线到空白处自动创建新节点交互逻辑
- **UI组件完善**: Button、Modal、Toast等基础组件的具体实现
- **右键菜单系统**: 画布和节点的上下文操作菜单

### ⏳ 体验优化待开发 (40%)
- **版本管理UI**: 节点版本历史的可视化界面
- **搜索筛选功能**: 节点内容搜索和多维度筛选机制
- **快捷键系统**: 键盘交互支持，提升操作效率
- **错误处理机制**: 完整错误边界和用户友好反馈系统
- **性能优化**: 大规模节点虚拟化渲染和性能调优

**🎯 项目成熟度**: 架构90% | 功能65% | 体验40% | 生产70%

## 🎨 核心功能特性

- 🎨 **无限画布**: 支持无限滚动的思维工作区域
- 🤖 **AI智能协作**: 双击创建、连线扩展、多输入融合
- 🔗 **连线扩展机制**: 拖拽到空白处自动生成新节点
- 📊 **智能版本管理**: AI内容迭代和历史追踪
- 🎯 **语义化标签**: 自动识别内容类型和重要性
- ⚡ **实时通信**: WebSocket确保流畅的AI交互体验

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **画布引擎**: React Flow (无限画布、虚拟化渲染)
- **状态管理**: Zustand (轻量级、模块化)
- **样式系统**: Tailwind CSS + Lucide React图标
- **AI集成**: 自研AIService (支持多模型、断线重连)
- **实时通信**: WebSocket (心跳机制、消息队列)
- **构建工具**: Vite + SWC (快速开发和构建)

## 🚀 快速开始

### 安装依赖
```bash
# 使用 pnpm (推荐)
pnpm install

# 或使用 npm
npm install
```

### 开发环境
```bash
# 启动开发服务器
pnpm run dev

# 类型检查
pnpm run type-check

# 代码检查
pnpm run lint

# 代码修复
pnpm run lint:fix
```

### 构建部署
```bash
# 构建生产版本
pnpm run build

# 预览构建结果
pnpm run preview
```

## 📁 项目结构

```
src/
├── components/          # 组件库
│   ├── canvas/         # 画布相关组件
│   ├── node/           # AI节点组件
│   ├── sidebar/        # 侧边栏组件
│   └── ui/             # 基础UI组件
├── services/           # 业务服务层
│   ├── aiService.ts    # AI内容生成服务
│   └── websocketService.ts # WebSocket通信
├── stores/             # Zustand状态管理
│   ├── canvasStore.ts  # 画布状态
│   ├── nodeStore.ts    # 节点状态
│   ├── aiStore.ts      # AI状态
│   └── uiStore.ts      # UI状态
├── types/              # TypeScript类型定义
└── pages/              # 页面组件
```

## 🚀 下一步开发计划

### Phase 3: 核心交互实现 (当前阶段 - 2周)
**目标**: 让用户能够真正使用AI协作功能
- [ ] **双击创建机制**: 空白画布双击创建AI节点的完整流程
- [ ] **拖拽扩展功能**: 连线到空白处自动创建新节点并调用AI
- [ ] **节点编辑器**: 内容编辑和实时AI优化功能
- [ ] **右键菜单**: 画布和节点的上下文操作菜单
- [ ] **基础UI组件**: 完善Button、Modal、Toast等组件

### Phase 4: AI协作体验 (1-2周) 
**目标**: 完善AI协作的智能化体验
- [ ] **多输入融合**: 空节点接收多个输入源，AI智能融合
- [ ] **智能标题生成**: 基于内容自动生成节点标题
- [ ] **置信度显示**: AI生成内容的可信度评分可视化
- [ ] **实时状态反馈**: 处理中、已完成等状态的流畅反馈
- [ ] **版本管理UI**: 节点内容版本历史和对比功能

### Phase 5: 用户体验优化 (1-2周)
**目标**: 提升整体使用体验和性能
- [ ] **搜索筛选系统**: 节点内容搜索和多维度筛选
- [ ] **快捷键支持**: 提升操作效率的键盘交互
- [ ] **错误处理完善**: 友好的错误提示和恢复机制
- [ ] **性能优化**: 大规模节点的虚拟化渲染
- [ ] **测试覆盖**: 单元测试和集成测试

### 🎯 MVP发布目标 (预计3-4周后)
完成Phase 3-4后即可发布可用的MVP版本，让用户体验完整的AI协作创造流程。

## 🔧 环境配置

创建 `.env.local` 文件配置AI服务：

```env
VITE_AI_API_URL=http://localhost:8000/api/ai
VITE_WS_URL=ws://localhost:8000/ws
```

## 📖 文档

- [架构设计文档](./架构设计文档.md) - 详细的技术架构和组件设计
- [功能计划文档](./plan.md) - MVP功能规划和开发优先级

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/新功能`)
3. 提交更改 (`git commit -m 'feat: 添加新功能'`)
4. 推送到分支 (`git push origin feature/新功能`)
5. 创建 Pull Request

## 📄 许可证

MIT License - 查看 [LICENSE](LICENSE) 文件了解详情