# @sker/console - API管理后台

系统管理员专用的API管理和监控平台，为@sker AI协作画布系统提供全面的运维管理能力。

## 🎯 核心价值

为@sker系统提供统一的后台管理、监控告警、性能优化和用户管理能力，确保AI协作画布平台的稳定运行和高效管理。

## 📋 主要功能菜单

### 1. 📊 仪表盘 (Dashboard)
```
仪表盘/
├── 🏠 总览看板
│   ├── 系统健康状态
│   ├── 实时用户数 & 活跃度
│   ├── API调用总量 & QPS
│   ├── AI处理成功率 & 响应时间
│   ├── 错误率统计 & 告警状态
│   └── 资源使用情况 (CPU/内存/存储)
│
├── 📈 实时监控
│   ├── 系统性能实时图表
│   ├── API响应时间分布
│   ├── AI处理队列状态
│   ├── 数据库连接池状态
│   └── 消息队列积压情况
│
└── 🎯 关键指标
    ├── 今日新增用户/项目
    ├── 画布操作热力图
    ├── AI生成内容统计
    └── 系统稳定性指标
```

### 2. 🔧 系统管理 (System Management)
```
系统管理/
├── ⚙️ 服务管理
│   ├── @sker/gateway 状态控制
│   ├── @sker/engine AI引擎管理
│   ├── @sker/broker 消息队列管理
│   ├── @sker/store 数据存储管理
│   └── 服务重启/停止/日志查看
│
├── 🗄️ 数据库管理
│   ├── PostgreSQL 连接监控
│   ├── Redis 缓存状态
│   ├── 数据备份计划管理
│   ├── SQL查询执行监控
│   └── 存储空间使用统计
│
├── 📨 消息队列管理
│   ├── RabbitMQ 连接状态
│   ├── 队列深度监控
│   ├── 消息处理统计
│   ├── 死信队列管理
│   └── 消费者性能监控
│
└── 🤖 AI服务管理
    ├── OpenAI API 配额使用
    ├── AI处理延迟监控
    ├── 模型调用统计
    ├── 错误率分析
    └── 成本控制设置
```

### 3. 👤 用户管理 (User Management)
```
用户管理/
├── 👥 用户列表
│   ├── 用户基本信息查看
│   ├── 账号状态管理 (启用/禁用)
│   ├── 登录历史记录
│   ├── 使用行为分析
│   └── 账号安全设置
│
├── 🏷️ 用户标签与分组
│   ├── 用户角色权限管理
│   ├── VIP/付费用户管理
│   ├── 测试用户标记
│   └── 用户分组与批量操作
│
├── 📊 用户行为分析
│   ├── 用户活跃度统计
│   ├── 功能使用热力图
│   ├── 留存率分析
│   └── 流失用户分析
│
└── 💳 订阅管理
    ├── 付费计划管理
    ├── 订阅状态查看
    ├── 账单与发票管理
    └── 使用量限制设置
```

### 4. 📈 项目监控 (Project Monitoring)
```
项目监控/
├── 🎨 画布项目管理
│   ├── 项目列表与搜索
│   ├── 项目详细信息查看
│   ├── 组件数量统计
│   ├── 项目活跃度分析
│   └── 异常项目标记
│
├── 🧩 组件分析
│   ├── 组件类型分布统计
│   ├── AI生成内容质量分析
│   ├── 重要性等级分布
│   ├── 用户编辑频率统计
│   └── 版本变更历史追踪
│
├── 🔗 连线关系分析
│   ├── 项目复杂度统计
│   ├── 连线模式分析
│   ├── 融合组件使用情况
│   └── 创新使用模式发现
│
└── 📋 内容审核
    ├── 敏感内容检测
    ├── 违规内容标记
    ├── 用户举报处理
    └── 内容质量评估
```

### 5. 🔍 API管理 (API Management)
```
API管理/
├── 📡 接口监控
│   ├── API调用统计 (按端点分组)
│   ├── 响应时间分析
│   ├── 成功率/错误率统计
│   ├── 高频调用接口TOP10
│   └── 异常调用模式检测
│
├── 🔐 访问控制
│   ├── API密钥管理
│   ├── 速率限制配置
│   ├── IP白名单/黑名单
│   ├── 权限等级设置
│   └── JWT令牌管理
│
├── 📋 接口文档
│   ├── API文档生成与维护
│   ├── 接口变更历史
│   ├── 测试用例管理
│   └── 开发者工具集成
│
└── 🚦 流量管理
    ├── 负载均衡配置
    ├── 限流策略设置
    ├── 熔断机制配置
    └── 缓存策略管理
```

### 6. 📊 性能监控 (Performance Monitoring)
```
性能监控/
├── 🖥️ 系统资源
│   ├── CPU使用率监控
│   ├── 内存使用情况
│   ├── 磁盘I/O统计
│   ├── 网络带宽使用
│   └── 负载均衡状态
│
├── ⚡ 应用性能
│   ├── 响应时间分布
│   ├── 吞吐量统计
│   ├── 并发连接数
│   ├── 数据库查询性能
│   └── 缓存命中率
│
├── 🤖 AI处理性能
│   ├── AI任务处理时间
│   ├── 队列等待时长
│   ├── 成功/失败处理比例
│   ├── Token使用统计
│   └── 模型性能对比
│
└── 📈 性能优化
    ├── 性能瓶颈识别
    ├── 优化建议生成
    ├── 历史性能趋势
    └── 容量规划建议
```

### 7. 🚨 告警中心 (Alert Center)
```
告警中心/
├── 🔔 告警配置
│   ├── 阈值设置 (CPU/内存/响应时间等)
│   ├── 告警规则管理
│   ├── 通知渠道配置 (邮件/短信/钉钉)
│   ├── 告警等级设置
│   └── 静默期配置
│
├── 📋 告警历史
│   ├── 历史告警记录查询
│   ├── 告警处理状态跟踪
│   ├── 告警趋势分析
│   ├── 常见问题总结
│   └── 误报分析与优化
│
├── 🎯 实时告警
│   ├── 当前活跃告警列表
│   ├── 紧急告警处理
│   ├── 告警确认与分派
│   └── 问题解决状态更新
│
└── 📊 告警分析
    ├── 告警频率统计
    ├── 系统稳定性评估
    ├── MTTR/MTBF指标
    └── 告警有效性分析
```

### 8. 📋 日志管理 (Log Management)
```
日志管理/
├── 🔍 日志查询
│   ├── 实时日志流查看
│   ├── 历史日志搜索
│   ├── 多条件过滤查询
│   ├── 日志级别筛选
│   └── 关键字高亮显示
│
├── 📊 日志统计
│   ├── 错误日志统计分析
│   ├── 访问日志流量统计
│   ├── 用户行为日志分析
│   ├── AI处理日志统计
│   └── 系统事件日志分析
│
├── 🗂️ 日志归档
│   ├── 日志保留策略设置
│   ├── 自动归档配置
│   ├── 日志压缩与清理
│   └── 合规性日志保存
│
└── 📈 日志可视化
    ├── 日志趋势图表
    ├── 错误分布可视化
    ├── 用户活动热力图
    └── 系统健康度仪表盘
```

### 9. ⚙️ 系统配置 (System Configuration)
```
系统配置/
├── 🔧 应用配置
│   ├── 环境变量管理
│   ├── 功能开关控制
│   ├── 业务参数配置
│   ├── 第三方服务配置
│   └── 版本发布管理
│
├── 🛡️ 安全配置
│   ├── 加密密钥管理
│   ├── SSL证书管理
│   ├── 安全策略配置
│   ├── 审计日志设置
│   └── 防火墙规则管理
│
├── 💾 备份恢复
│   ├── 自动备份策略
│   ├── 备份文件管理
│   ├── 数据恢复操作
│   ├── 灾备计划管理
│   └── 备份验证测试
│
└── 🔄 更新维护
    ├── 系统更新管理
    ├── 维护窗口计划
    ├── 回滚操作管理
    └── 变更记录追踪
```

### 10. 📊 报表中心 (Report Center)
```
报表中心/
├── 📈 业务报表
│   ├── 用户增长报表
│   ├── 项目使用统计报表
│   ├── AI功能使用报表
│   ├── 收入统计报表
│   └── 用户留存分析报表
│
├── 🔧 运维报表
│   ├── 系统稳定性报表
│   ├── 性能指标报表
│   ├── 告警统计报表
│   ├── 资源使用报表
│   └── 成本分析报表
│
├── 📋 定制报表
│   ├── 报表模板管理
│   ├── 自定义报表创建
│   ├── 报表调度配置
│   ├── 报表分享与导出
│   └── 报表权限管理
│
└── 📊 数据分析
    ├── 多维度数据钻取
    ├── 趋势预测分析
    ├── 异常数据检测
    └── 商业智能洞察
```

## 🎨 界面设计规范

### 主导航结构
```
顶部导航栏:
├── 🏠 仪表盘
├── 🔧 系统管理
├── 👤 用户管理
├── 📈 项目监控
├── 🔍 API管理
├── 📊 性能监控
├── 🚨 告警中心
├── 📋 日志管理
├── ⚙️ 系统配置
└── 📊 报表中心
```

### 权限控制矩阵
```yaml
超级管理员:
  - 所有功能完整访问权限
  - 系统配置修改权限
  - 用户管理权限

系统运维:
  - 监控告警管理
  - 日志查看分析
  - 性能优化操作
  - 只读用户信息

业务运营:
  - 用户管理权限
  - 项目内容审核
  - 报表查看导出
  - 业务配置修改

开发测试:
  - API管理权限
  - 日志查看权限
  - 测试数据管理
  - 开发工具使用
```

## 🚀 技术架构

### 前端技术栈
- **框架**: React 18 + TypeScript
- **UI库**: Ant Design Pro 5.x
- **状态管理**: Redux Toolkit + RTK Query
- **图表库**: ECharts + G2Plot
- **实时通信**: Socket.io Client
- **构建工具**: Vite

### 后端集成
- **监控集成**: Prometheus + Grafana
- **日志分析**: ElasticSearch + Kibana
- **告警系统**: AlertManager
- **指标收集**: Node.js Metrics
- **API网关**: 与 @sker/gateway 集成

## 🛠️ 开发环境

```bash
# 安装依赖
pnpm install

# 启动开发服务
pnpm run dev

# 构建生产版本
pnpm run build

# 启动监控面板
pnpm run monitor

# 运行测试
pnpm run test

# 代码检查
pnpm run lint
```

## 📦 部署配置

```yaml
# Docker配置
services:
  console:
    build: .
    ports:
      - "3001:3001"
    environment:
      - NODE_ENV=production
      - GRAFANA_URL=http://grafana:3000
      - ELASTICSEARCH_URL=http://elasticsearch:9200
    depends_on:
      - grafana
      - elasticsearch
      - prometheus
```

## 🎯 开发里程碑

### Phase 1: 基础框架 (Week 1-2)
- [ ] Ant Design Pro 项目初始化
- [ ] 基础路由和权限控制
- [ ] 仪表盘主要指标展示
- [ ] 用户管理基础功能

### Phase 2: 核心功能 (Week 3-4)
- [ ] 系统监控集成
- [ ] API管理功能
- [ ] 告警中心实现
- [ ] 日志管理系统

### Phase 3: 高级特性 (Week 5-6)
- [ ] 报表中心开发
- [ ] 性能优化工具
- [ ] 数据分析功能
- [ ] 系统配置管理

这个功能菜单设计为@sker/console提供了完整的系统管理能力，确保AI协作画布平台能够稳定、高效、安全地运行。