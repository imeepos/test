# 微服务架构环境变量配置
# 复制到 .env 文件并根据环境修改

# =================================
# 全局配置
# =================================
NODE_ENV=production
COMPOSE_PROJECT_NAME=sker-microservices

# =================================
# Store微服务配置
# =================================
# 服务配置
STORE_PORT=3001
STORE_HOST=0.0.0.0

# 数据库配置
PG_HOST=postgres
PG_PORT=5432
PG_DATABASE=sker
PG_USER=postgres
PG_PASSWORD=postgres

# Redis配置
REDIS_HOST=redis
REDIS_PORT=6379

# 安全配置
JWT_SECRET=your-super-secret-jwt-key-at-least-32-chars-long-change-in-production
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# 性能配置
BODY_LIMIT=10mb
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100
STRICT_RATE_LIMIT_MAX=10

# =================================
# Gateway微服务配置
# =================================
# 服务配置
GATEWAY_PORT=3000
GATEWAY_HOST=0.0.0.0

# Store服务连接
STORE_SERVICE_URL=http://store:3001
STORE_TIMEOUT=15000
STORE_RETRIES=5
STORE_RETRY_DELAY=2000

# 认证配置
JWT_EXPIRES_IN=24h
JWT_ISSUER=sker-gateway
JWT_AUDIENCE=sker-api

# CORS配置
FRONTEND_URL=http://localhost:5173,http://localhost:3000

# 限流配置
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# WebSocket配置
WS_PATH=/socket.io
WS_HEARTBEAT_INTERVAL=30000
WS_TIMEOUT=60000
WS_MAX_CONNECTIONS=1000

# RabbitMQ配置
RABBITMQ_URL=amqp://rabbitmq:5672

# 安全配置
SECURITY_HELMET=true
SECURITY_COMPRESSION=true
SECURITY_TRUST_PROXY=true
SECURITY_BODY_LIMIT=10mb

# =================================
# Broker微服务配置
# =================================
# Store服务连接
STORE_AUTH_TOKEN=

# RabbitMQ配置
RABBITMQ_RECONNECT_DELAY=5000
RABBITMQ_MAX_RECONNECT_ATTEMPTS=10

# AI任务配置
AI_TASK_TIMEOUT=600000

# =================================
# 数据库配置
# =================================
# PostgreSQL
POSTGRES_DB=sker
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# =================================
# 消息队列配置
# =================================
# RabbitMQ
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=admin

# =================================
# 监控配置
# =================================
# Grafana
GF_SECURITY_ADMIN_PASSWORD=admin

# =================================
# 开发环境覆盖
# =================================
# 在开发环境中，可以覆盖以下变量：
# NODE_ENV=development
# STORE_SERVICE_URL=http://localhost:3001
# RABBITMQ_URL=amqp://localhost:5672
# PG_HOST=localhost
# REDIS_HOST=localhost